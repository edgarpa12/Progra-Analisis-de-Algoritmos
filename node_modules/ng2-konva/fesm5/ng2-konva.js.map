{"version":3,"file":"ng2-konva.js.map","sources":["ng://ng2-konva/lib/utils/updatePicture.ts","ng://ng2-konva/lib/utils/applyNodeProps.ts","ng://ng2-konva/lib/utils/index.ts","ng://ng2-konva/lib/components/core-shape.component.ts","ng://ng2-konva/lib/components/stage.component.ts","ng://ng2-konva/lib/konva.module.ts"],"sourcesContent":["// adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\r\n\r\nexport default function updatePicture(node) {\r\n  const drawingNode = node.getLayer() || node.getStage();\r\n  if (drawingNode) {\r\n    drawingNode.batchDraw();\r\n  }\r\n}\r\n","// adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\r\n\r\nimport updatePicture from './updatePicture';\r\n\r\ndeclare const Image: any;\r\n\r\nexport default function applyNodeProps(component, props = {}, oldProps = {}) {\r\n  if ('id' in props) {\r\n    // tslint:disable-next-line:max-line-length\r\n    const message = `ng2-konva: You are using \"id\" attribute for Konva node. In some very rare cases it may produce bugs. Currently we recommend not to use it and use \"name\" attribute instead.`;\r\n    console.warn(message);\r\n  }\r\n\r\n  const instance = component._stage;\r\n  const updatedProps = {};\r\n  let hasUpdates = false;\r\n\r\n  Object.keys(oldProps).forEach(key => {\r\n    const isEvent = key.slice(0, 2) === 'on';\r\n    const propChanged = oldProps[key] !== props[key];\r\n    if (isEvent && propChanged) {\r\n      let eventName = key.substr(2).toLowerCase();\r\n      if (eventName.substr(0, 7) === 'content') {\r\n        eventName =\r\n          'content' +\r\n          eventName.substr(7, 1).toUpperCase() +\r\n          eventName.substr(8);\r\n      }\r\n      instance.off(eventName, oldProps[key]);\r\n    }\r\n    const toRemove = !props.hasOwnProperty(key);\r\n    if (toRemove) {\r\n      instance.setAttr(key, undefined);\r\n    }\r\n  });\r\n  Object.keys(props).forEach(key => {\r\n    let isEvent = key.slice(0, 2) === 'on';\r\n    const toAdd = oldProps[key] !== props[key];\r\n    if (isEvent && toAdd) {\r\n      let eventName = key.substr(2).toLowerCase();\r\n      if (eventName.substr(0, 7) === 'content') {\r\n        eventName =\r\n          'content' +\r\n          eventName.substr(7, 1).toUpperCase() +\r\n          eventName.substr(8);\r\n      }\r\n      if (props[key]) {\r\n        instance.off(eventName);\r\n        instance.on(eventName, evt => {\r\n          props[key](evt.target.AngularComponent, evt);\r\n        });\r\n      }\r\n    }\r\n    if (\r\n      !isEvent &&\r\n      (props[key] !== oldProps[key] || props[key] !== instance.getAttr(key))\r\n    ) {\r\n      hasUpdates = true;\r\n      updatedProps[key] = props[key];\r\n    }\r\n  });\r\n\r\n  if (hasUpdates) {\r\n    instance.setAttrs(updatedProps);\r\n    updatePicture(instance);\r\n    let val;\r\n    Object.keys(updatedProps).forEach(prop => {\r\n      val = updatedProps[prop];\r\n      if (val instanceof Image && !val.complete) {\r\n        const node = instance;\r\n        val.addEventListener('load', function() {\r\n          const layer = node.getLayer();\r\n          if (layer) {\r\n            layer.batchDraw();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","import updatePicture from './updatePicture';\r\nimport applyNodeProps from './applyNodeProps';\r\n\r\nfunction camelize(str) {\r\n  return str\r\n    .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(letter, index) {\r\n      return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\r\n    })\r\n    .replace(/\\s+/g, '');\r\n}\r\n\r\nfunction capitalizeFirstLetter(string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\nexport function getName(componentTag) {\r\n  return capitalizeFirstLetter(camelize(componentTag.substr(3).replace('-', ' ')));\r\n}\r\n\r\nexport function createListener(instance: any) {\r\n  const output = {};\r\n  [\r\n    'click',\r\n    'dblclick',\r\n    'mouseover',\r\n    'mouseout',\r\n    'mousemove',\r\n    'tap',\r\n    'dbltap',\r\n    'touchstart',\r\n    'scaleXChange',\r\n    'fillChange',\r\n    'dragstart',\r\n    'dragmove',\r\n    'dragend',\r\n  ].forEach(eventName => {\r\n    if (instance[eventName].observers.length) {\r\n      output['on' + eventName] = instance[eventName].emit.bind(\r\n        instance[eventName]\r\n      );\r\n    }\r\n  });\r\n  return output;\r\n}\r\n\r\nexport { updatePicture, applyNodeProps };\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  ElementRef,\r\n  AfterContentInit,\r\n  ContentChildren,\r\n  QueryList,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  getName,\r\n  createListener,\r\n  applyNodeProps,\r\n  updatePicture\r\n} from '../utils/index';\r\nimport { KonvaComponent } from '../ko.interface';\r\n\r\ndeclare const Konva: any;\r\n\r\n@Component({\r\n  // tslint:disable-next-line:max-line-length\r\n  selector:\r\n    // tslint:disable-next-line:max-line-length\r\n    'ko-shape, ko-layer, ko-circle, ko-fastlayer, ko-group, ko-label, ko-rect, ko-ellipse, ko-wedge, ko-line, ko-sprite, ko-image, ko-text, ko-text-path, ko-star, ko-ring, ko-arc, ko-tag, ko-path, ko-regular-polygon, ko-arrow',\r\n  template: `<div><ng-content></ng-content></div>`\r\n})\r\nexport class CoreShapeComponent\r\n  implements KonvaComponent, AfterContentInit, OnDestroy, OnInit {\r\n  @ContentChildren(CoreShapeComponent)\r\n  shapes = new QueryList<CoreShapeComponent>();\r\n  @Input() config: Observable<any>;\r\n  @Output() click: EventEmitter<any> = new EventEmitter();\r\n  @Output() dblclick: EventEmitter<any> = new EventEmitter();\r\n  @Output() mouseover: EventEmitter<any> = new EventEmitter();\r\n  @Output() mouseout: EventEmitter<any> = new EventEmitter();\r\n  @Output() mousemove: EventEmitter<any> = new EventEmitter();\r\n  @Output() tap: EventEmitter<any> = new EventEmitter();\r\n  @Output() dbltap: EventEmitter<any> = new EventEmitter();\r\n  @Output() touchstart: EventEmitter<any> = new EventEmitter();\r\n  @Output() scaleXChange: EventEmitter<any> = new EventEmitter();\r\n  @Output() fillChange: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragstart: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragmove: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragend: EventEmitter<any> = new EventEmitter();\r\n\r\n  public nameNode: string;\r\n  public added = false;\r\n\r\n  private cacheProps: any = {};\r\n  private _stage: any = {};\r\n  private _config;\r\n\r\n  public getStage() {\r\n    return this._stage;\r\n  }\r\n\r\n  public getConfig() {\r\n    return this._config || {};\r\n  }\r\n\r\n  constructor(private elementRef: ElementRef) {\r\n    this.nameNode = getName(elementRef.nativeElement.localName);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initKonva();\r\n  }\r\n\r\n  private initKonva() {\r\n    const ng = this;\r\n    const NodeClass = Konva[this.nameNode];\r\n    this._stage = new NodeClass();\r\n    this._stage.AngularComponent = this;\r\n    const animationStage = this._stage.to.bind(this._stage);\r\n\r\n    this._stage.to = function(newConfig) {\r\n      animationStage(newConfig);\r\n      setTimeout(() => {\r\n        Object.keys(ng._stage.attrs).forEach(key => {\r\n          if (typeof ng._stage.attrs[key] !== 'function') {\r\n            ng.config[key] = ng._stage.attrs[key];\r\n          }\r\n        });\r\n      }, 200);\r\n    };\r\n    if (this.config) {\r\n      this.config.subscribe(config => {\r\n        this._config = config;\r\n        this.uploadKonva(config);\r\n      });\r\n    }\r\n  }\r\n\r\n  private uploadKonva(config) {\r\n    const props = {\r\n      ...config,\r\n      ...createListener(this)\r\n    };\r\n    applyNodeProps(this, props, this.cacheProps);\r\n    this.cacheProps = props;\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.shapes.forEach((item: CoreShapeComponent) => {\r\n      if (this !== item) {\r\n        item.added = true;\r\n        this._stage.add(item.getStage());\r\n        updatePicture(this._stage);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._stage.destroy();\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  AfterContentInit,\r\n  ElementRef,\r\n  ContentChildren,\r\n  QueryList,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { CoreShapeComponent as CoreShape } from './core-shape.component';\r\nimport { Observable } from 'rxjs';\r\nimport { updatePicture, createListener, applyNodeProps } from '../utils/index';\r\nimport { KonvaComponent } from '../ko.interface';\r\n\r\ndeclare const Konva: any;\r\n\r\n@Component({\r\n  selector: 'ko-stage',\r\n  template: `<div><ng-content></ng-content>{{config}}</div>`\r\n})\r\nexport class StageComponent\r\n  implements KonvaComponent, AfterContentInit, OnInit, OnDestroy {\r\n  @ContentChildren(CoreShape) shapes = new QueryList<CoreShape>();\r\n  @Input() config: Observable<any>;\r\n  @Output() click: EventEmitter<any> = new EventEmitter();\r\n  @Output() dblclick: EventEmitter<any> = new EventEmitter();\r\n  @Output() mouseover: EventEmitter<any> = new EventEmitter();\r\n  @Output() mouseout: EventEmitter<any> = new EventEmitter();\r\n  @Output() mousemove: EventEmitter<any> = new EventEmitter();\r\n  @Output() tap: EventEmitter<any> = new EventEmitter();\r\n  @Output() dbltap: EventEmitter<any> = new EventEmitter();\r\n  @Output() touchstart: EventEmitter<any> = new EventEmitter();\r\n  @Output() scaleXChange: EventEmitter<any> = new EventEmitter();\r\n  @Output() fillChange: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragstart: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragmove: EventEmitter<any> = new EventEmitter();\r\n  @Output() dragend: EventEmitter<any> = new EventEmitter();\r\n\r\n  private _stage;\r\n  private _config;\r\n  private cacheProps: any = {};\r\n\r\n  public getStage() {\r\n    return this._stage || {};\r\n  }\r\n\r\n  public getConfig() {\r\n    return this._config || {};\r\n  }\r\n\r\n  constructor(private elementRef: ElementRef) {}\r\n\r\n  private uploadKonva(config) {\r\n    const props = {\r\n      ...config,\r\n      ...createListener(this)\r\n    };\r\n    applyNodeProps(this, props, this.cacheProps);\r\n    this.cacheProps = props;\r\n  }\r\n\r\n  ngOnInit() {\r\n    const nodeContainer = this.elementRef.nativeElement;\r\n    this.config.subscribe(config => {\r\n      this._config = config;\r\n      if (!this._stage) {\r\n        this._stage = new Konva.Stage({\r\n          width: config.width,\r\n          height: config.height,\r\n          container: nodeContainer\r\n        });\r\n        this.uploadKonva(config);\r\n      } else {\r\n        this.uploadKonva(config);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.shapes.forEach((item: CoreShape) => {\r\n      this._stage.add(item.getStage());\r\n      updatePicture(this._stage);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._stage.destroy();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { StageComponent } from './components/stage.component';\r\nimport { CoreShapeComponent } from './components/core-shape.component';\r\n\r\ndeclare global {\r\n  interface Window { Konva: any; }\r\n}\r\n\r\nif (typeof window !== 'undefined' && !window.Konva) {\r\n  require('konva');\r\n}\r\n\r\nexport * from './components/stage.component';\r\nexport * from './components/core-shape.component';\r\nexport { KonvaComponent } from './ko.interface';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    StageComponent,\r\n    CoreShapeComponent,\r\n  ],\r\n  exports: [\r\n    StageComponent,\r\n    CoreShapeComponent,\r\n  ]\r\n})\r\nexport class KonvaModule {\r\n}\r\n"],"names":["CoreShape"],"mappings":"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"}
